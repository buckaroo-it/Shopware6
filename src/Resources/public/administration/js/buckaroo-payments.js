(function(){var e={488:function(){},110:function(){},272:function(){},320:function(){let{Application:e}=Shopware,t=Shopware.Classes.ApiService;class n extends t{constructor(e,t,n="buckaroo"){super(e,t,n)}getSupportVersion(){let e=`_action/${this.getApiBasePath()}/version`;return this.httpClient.post(e,{},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}getTaxes(){let e=`_action/${this.getApiBasePath()}/taxes`;return this.httpClient.post(e,{},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}getIn3Icons(){let e=`_action/${this.getApiBasePath()}/in3/logos`;return this.httpClient.post(e,{},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}getApiTest(e,n,a){let r=`_action/${this.getApiBasePath()}/getBuckarooApiTest`;return this.httpClient.post(r,{websiteKeyId:e,secretKeyId:n,saleChannelId:a},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}}e.addServiceProvider("BuckarooPaymentSettingsService",t=>new n(e.getContainer("init").httpClient,t.loginService))},666:function(){let{Application:e}=Shopware,t=Shopware.Classes.ApiService;class n extends t{constructor(e,t,n="buckaroo"){super(e,t,n)}getBuckarooTransaction(e){let n=`_action/${this.getApiBasePath()}/getBuckarooTransaction`;return this.httpClient.post(n,{transaction:e},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}refundPayment(e,n,a,r){let s=`_action/${this.getApiBasePath()}/refund`;return this.httpClient.post(s,{transaction:e,transactionsToRefund:n,orderItems:a,customRefundAmount:r},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}captureOrder(e){let n=`_action/${this.getApiBasePath()}/capture`;return this.httpClient.post(n,{transaction:e},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}createPaylink(e){let n=`_action/${this.getApiBasePath()}/paylink`;return this.httpClient.post(n,{transaction:e},{headers:this.getBasicHeaders()}).then(e=>t.handleResponse(e))}}e.addServiceProvider("BuckarooPaymentService",t=>new n(e.getContainer("init").httpClient,t.loginService))},104:function(){let{Component:e}=Shopware;e.extend("buckaroo-payment-config","sw-extension-config",{})},302:function(e,t,n){var a=n(488);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(346).Z("7d31dbbc",a,!0,{})},737:function(e,t,n){var a=n(110);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(346).Z("5e29aa68",a,!0,{})},383:function(e,t,n){var a=n(272);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(346).Z("b5d65aae",a,!0,{})},346:function(e,t,n){"use strict";function a(e,t){for(var n=[],a={},r=0;r<t.length;r++){var s=t[r],o=s[0],i={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};a[o]?a[o].parts.push(i):n.push(a[o]={id:o,parts:[i]})}return n}n.d(t,{Z:function(){return g}});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),i=null,l=0,c=!1,d=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,n,r){c=n,u=r||{};var o=a(e,t);return h(o),function(t){for(var n=[],r=0;r<o.length;r++){var i=s[o[r].id];i.refs--,n.push(i)}t?h(o=a(e,t)):o=[];for(var r=0;r<n.length;r++){var i=n[r];if(0===i.refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete s[i.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],a=s[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(f(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{for(var o=[],r=0;r<n.parts.length;r++)o.push(f(n.parts[r]));s[n.id]={id:n.id,refs:1,parts:o}}}}function y(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function f(e){var t,n,a=document.querySelector("style["+m+'~="'+e.id+'"]');if(a){if(c)return d;a.parentNode.removeChild(a)}if(p){var r=l++;t=k.bind(null,a=i||(i=y()),r,!1),n=k.bind(null,a,r,!0)}else t=v.bind(null,a=y()),n=function(){a.parentNode.removeChild(a)};return t(e),function(a){a?(a.css!==e.css||a.media!==e.media||a.sourceMap!==e.sourceMap)&&t(e=a):n()}}var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function k(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function v(e,t){var n=t.css,a=t.media,r=t.sourceMap;if(a&&e.setAttribute("media",a),u.ssrId&&e.setAttribute(m,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={id:a,exports:{}};return e[a](s,s.exports,n),s.exports}n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundles/buckaroopayments/",window?.__sw__?.assetPath&&(n.p=window.__sw__.assetPath+"/bundles/buckaroopayments/"),function(){"use strict";let{Component:e,Context:t}=Shopware,a=Shopware.Data.Criteria;e.override("sw-order-detail",{template:'{% block sw_order_detail_content_tabs %}\r\n    <div\r\n     v-if="isPaymentInTestMode && setIsBuckarooPayment"\r\n     style="max-width: 960px; margin: 0 auto 15px; background: rgb(251, 227, 231); border-radius:4px; color: #de294c; display:flex; align-items:center;">\r\n        <div style="background:#de294c;padding: 4px 8px;border-radius: 4px 0 0 4px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path d="m13.7744 1.4124 9.7058 18.6649c.5096.98.1283 2.1875-.8517 2.6971a2 2 0 0 1-.9227.2256H2.2942c-1.1045 0-2-.8954-2-2a2 2 0 0 1 .2256-.9227l9.7058-18.665c.5096-.98 1.7171-1.3613 2.6971-.8517a2 2 0 0 1 .8517.8518zM2.2942 21h19.4116L12 2.335 2.2942 21zM12 17c.5523 0 1 .4477 1 1s-.4477 1-1 1-1-.4477-1-1 .4477-1 1-1zm1-2c0 .5523-.4477 1-1 1s-1-.4477-1-1v-5c0-.5523.4477-1 1-1s1 .4477 1 1v5z" id="icons-default-warning"></path></defs><use xlink:href="#icons-default-warning" fill="#fff" fill-rule="evenodd"></use></svg></div>\r\n        <p style="margin-left:10px;">{{ $tc(\'buckaroo-payment.paymentInTestMode\') }}</p>\r\n    </div>\r\n    {% parent %}\r\n{% endblock %}\r\n\r\n\r\n{% block sw_order_detail_content_tabs_general %}\r\n    {% parent %}\r\n\r\n    <sw-tabs-item v-if="setIsBuckarooPayment" :route="{ name: \'buckaroo.payment.detail\', params: { id: $route.params.id } }" :title="$tc(\'buckaroo-payment.tabs.title\')">\r\n        {{ $tc(\'buckaroo-payment.tabs.title\') }}\r\n    </sw-tabs-item>\r\n    \r\n{% endblock %}\r\n\r\n{% block sw_order_detail_actions %}\r\n    <template v-if="isEditable">\r\n    </template>\r\n    {% parent %}\r\n{% endblock %}',data(){return{isBuckarooPayment:!1,isPaymentInTestMode:!1}},computed:{isEditable(){return!this.isBuckarooPayment||"buckaroo.payment.detail"!==this.$route.name},showTabs(){return!0}},watch:{orderId:{deep:!0,handler(){if(!this.orderId){this.setIsBuckarooPayment(null);return}let e=this.repositoryFactory.create("order"),n=new a(1,1);n.addAssociation("transactions"),e.get(this.orderId,t.api,n).then(e=>{if(this.setPaymentInTestMode(e),e.transactions.length<=0||!e.transactions.last().paymentMethodId){this.setIsBuckarooPayment(null);return}let t=e.transactions.last().paymentMethodId;null!=t&&this.setIsBuckarooPayment(t)})},immediate:!0}},methods:{setPaymentInTestMode(e){e.customFields&&e.customFields.buckaroo_payment_in_test_mode&&(this.isPaymentInTestMode=!0===e.customFields.buckaroo_payment_in_test_mode)},setIsBuckarooPayment(e){e&&this.repositoryFactory.create("payment_method").get(e,t.api).then(e=>{this.isBuckarooPayment=e.formattedHandlerIdentifier.indexOf("buckaroo")>=0})}}});let{Component:r,Context:s}=Shopware;Shopware.Data.Criteria,r.override("sw-order-detail-base",{template:'{% block sw_order_detail_base_line_items_summary %}\r\n\r\n    <sw-card-section divider="top" secondary slim v-if="order.customFields !== null">\r\n        <sw-container columns="1fr 440px"\r\n        class="sw-order-detail__summary" v-if="order.customFields.buckarooFee !== null && order.customFields.buckarooFee > 0">\r\n            <sw-description-list grid="265px 1fr"\r\n            class="sw-order-detail__summary-data">\r\n                <dt>{{ $tc(\'buckaroo-payment.fee\') }}</dt>\r\n                <dd>{{ order.customFields.buckarooFee }}\r\n                    {% if order.currency.isoCode == "PLN" %}\r\n                        PLN\r\n                    {% else %}\r\n                        {{ order.currency.symbol }}\r\n                    {% endif %}\r\n                    </dd>\r\n            </sw-description-list>\r\n        </sw-container>\r\n    </sw-card-section>\r\n\r\n    {% parent %}\r\n    \r\n{% endblock %}'});let{Component:o}=Shopware;o.override("sw-order-user-card",{template:"{% block sw_order_detail_base_secondary_info_payment %}\r\n    <template v-if=\"currentOrder.transactions.length > 0 && (!currentOrder.transactions.last().paymentMethod.translated.customFields || !currentOrder.transactions.last().paymentMethod.translated.customFields.is_buckaroo)\">\r\n        {% parent %}\r\n    </template>\r\n    <template v-if=\"currentOrder.transactions.length > 0 && currentOrder.transactions.last().paymentMethod.translated.customFields && currentOrder.transactions.last().paymentMethod.translated.customFields.is_buckaroo\">\r\n        <dt>{{ $tc('sw-order.detailBase.labelPaymentMethod') }}</dt>\r\n        <dd>\r\n            <template v-if=\"config['BuckarooPayments.config.' + currentOrder.transactions.last().paymentMethod.translated.customFields.buckaroo_key + 'Label']\">\r\n                {{ config['BuckarooPayments.config.' + currentOrder.transactions.last().paymentMethod.translated.customFields.buckaroo_key + 'Label'] }}\r\n            </template>\r\n        </dd>\r\n    </template>\r\n{% endblock %}\r\n\r\n",inject:["systemConfigApiService"],data(){return{config:{}}},created(){this.systemConfigApiService.getValues("BuckarooPayments.config",null).then(e=>{this.config=e}).finally(()=>{})}});let{Component:i}=Shopware;i.override("sw-system-config",{template:' {% block sw_system_config_content_card %}\r\n    <template v-if="domain !== \'BuckarooPayments.config\'">\r\n        {% parent() %}\r\n    </template>\r\n    <template v-else>\r\n       <buckaroo-main-config\r\n            v-model="actualConfigData[currentSalesChannelId]"\r\n            :configSettings="config"\r\n            :isNotDefaultSalesChannel="isNotDefaultSalesChannel"\r\n            :currentSalesChannelId="currentSalesChannelId"\r\n            :elementMethods="{getElementBind, getFieldError, getInheritWrapperBind, getInheritedValue, hasMapInheritanceSupport, getInlineSnippet, kebabCase}"\r\n            v-if="!isLoading"\r\n        ></buckaroo-main-config>\r\n    </template>\r\n {% endblock %}',methods:{saveAll(){return"BuckarooPayments.config"!==this.domain?this.$super("saveAll"):this.saveBuckaroo()},saveBuckaroo(){return this.isLoading=!0,this.systemConfigApiService.batchSave(this.getSelectedValues()).finally(()=>{this.isLoading=!1})},getCurrentConfigCard(){let e=this.$route.params?.paymentCode||"general";return this.config.filter(t=>t.name===e)?.pop()},getSelectedValues(){let e=this.actualConfigData[this.currentSalesChannelId],t=this.getCurrentConfigCard();if(t?.elements){let n={};return t?.elements.forEach(t=>{t?.name&&(n[t.name]=e[t.name])}),{[this.currentSalesChannelId]:n}}return this.actualConfigData}}}),n(383);let{Component:l,Mixin:c,Filter:d,Context:u}=Shopware,m=Shopware.Data.Criteria;l.register("buckaroo-payment-detail",{template:'{% block buckaroo_payment_detail %}\r\n    <div class="buckaroo-payment-detail">\r\n        \r\n        <sw-card positionIdentifier="bk-paylink" :title="$tc(\'buckaroo-payment.paymentDetail.paylinkTitle\')" v-if="isPaylinkVisible">\r\n\r\n            {{ $tc(\'buckaroo-payment.paymentDetail.paylinkDescription\') }}\r\n            \r\n            <span v-if="paylink"> <br>\r\n            {{ $tc(\'buckaroo-payment.paymentDetail.yourLink\') }}: <a :href="paylink">{{ paylink }}</a>\r\n            </span>\r\n\r\n            <sw-container columns="1fr 440px" class="sw-order-detail__summary">\r\n                <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data"><dt></dt> <dd>\r\n            \r\n                        <sw-button @click="createPaylink(orderId)" :disabled="!isPaylinkAvailable">\r\n                            {{ $tc(\'buckaroo-payment.paymentDetail.paylinkButton\') }}\r\n                        </sw-button></dd>\r\n                </sw-description-list>\r\n            </sw-container>\r\n\r\n        </sw-card>\r\n\r\n         <sw-card positionIdentifier="bk-refund" :title="$tc(\'buckaroo-payment.paymentDetail.refundTitle\')">\r\n            \r\n            {{ $tc(\'buckaroo-payment.orderItems.title\') }}\r\n            <sw-data-grid :dataSource="orderItems"\r\n                :columns="orderItemsColumns"\r\n                :showActions="false"\r\n                :showSelection="false">\r\n\r\n                    <template #column-name="{ item }">\r\n                        <sw-product-variant-info :showTooltip="false" :variations="item.variations">\r\n                            {{ item.name }}\r\n                        </sw-product-variant-info>\r\n                    </template>\r\n                    <template #column-quantity="{ item }">\r\n                        <input class="bk-reund-qty" type="number" min="0" :max="item.quantityMax" v-model="item.quantity" @input="recalculateOrderItems" onkeydown="return event.keyCode !== 69">\r\n                    </template>\r\n\r\n            </sw-data-grid>\r\n\r\n            <sw-container columns="1fr 440px" class="sw-order-detail__summary">\r\n                <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data">\r\n                        <dt>{{ $tc(\'buckaroo-payment.paymentDetail.amountTotalTitle\') }}: </dt>\r\n                        <dd>{{ buckaroo_refund_amount }}  {{ currency }}</dd>\r\n                </sw-description-list>\r\n            </sw-container>\r\n                 \r\n            <sw-card-section divider="top" secondary slim>\r\n                <sw-container columns="1fr 440px"\r\n                              class="sw-order-detail__summary">\r\n                </sw-container>\r\n\r\n                <sw-data-grid :dataSource="transactionsToRefund"\r\n                    :columns="transactionsToRefundColumns"\r\n                    :showHeader="false"\r\n                    :showActions="false"\r\n                    :showSelection="false">\r\n\r\n                        <template #column-transaction_method="{ item }">\r\n                                <span v-if="item.transaction_method == \'KbcPaymentButton\'">\r\n                                    Kbc\r\n                                </span>\r\n                                <span v-else>\r\n                                    {{ item.transaction_method }}\r\n                                </span>\r\n                        </template>\r\n\r\n                        <template #column-amount="{ item }">\r\n                            <input type="number" min="0" :max="item.amountMax" v-model="item.amount"  @input="recalculateRefundItems" onkeydown="return event.keyCode !== 69">\r\n                        </template>\r\n\r\n                </sw-data-grid>\r\n\r\n                <sw-container v-if="!isAuthorized" columns="1fr 440px" class="sw-order-detail__summary">\r\n                    <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data">\r\n                            <dt>{{ $tc(\'buckaroo-payment.paymentDetail.amountCustomRefundTitle\') }}: </dt>\r\n                            <dd>\r\n                                <input id="buckaroo_custom_refund_enabled" type="checkbox"\r\n                                       @click="toggleCustomRefund()">\r\n                                <input id="buckaroo_custom_refund_amount" type="number"\r\n                                       v-model="buckaroo_refund_total_amount" disabled style="width:70px;"> {{ currency }}\r\n                            </dd>\r\n                    </sw-description-list>\r\n                    <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data">\r\n                            <dt>{{ $tc(\'buckaroo-payment.paymentDetail.amountRefundTotalTitle\') }}: </dt>\r\n                            <dd>{{ buckaroo_refund_total_amount }} {{ currency }}</dd>\r\n                    </sw-description-list>\r\n                </sw-container>\r\n                 \r\n            </sw-card-section>\r\n\r\n            <sw-container columns="1fr 440px" class="sw-order-detail__summary">\r\n                <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data"><dt></dt><dd>\r\n                    <sw-button @click="refundOrder(orderId, buckaroo_refund_amount)" :disabled="!isRefundPossible || isAuthorized">\r\n                    {{ $tc(\'buckaroo-payment.paymentDetail.buttonTitle\') }}\r\n                    </sw-button></dd>\r\n                </sw-description-list>\r\n            </sw-container>\r\n\r\n         </sw-card>\r\n\r\n        <sw-card positionIdentifier="bk-pay-desc" :title="$tc(\'buckaroo-payment.paymentDetail.payTitle\')">\r\n\r\n            {{ $tc(\'buckaroo-payment.paymentDetail.payDescription\') }}\r\n\r\n            <sw-container columns="1fr 440px" class="sw-order-detail__summary">\r\n                <sw-description-list grid="265px 1fr" class="sw-order-detail__summary-data"><dt></dt><dd>\r\n                        <sw-button @click="captureOrder(orderId)" :disabled="!isCapturePossible">\r\n                            {{ $tc(\'buckaroo-payment.paymentDetail.payButton\') }}\r\n                        </sw-button></dd>\r\n                </sw-description-list>\r\n            </sw-container>\r\n\r\n        </sw-card>\r\n\r\n         <sw-card positionIdentifier="bk-pay-transaction" :title="$tc(\'buckaroo-payment.paymentDetail.transactionsTitle\')">\r\n            <sw-data-grid :dataSource="relatedResources"\r\n                :columns="relatedResourceColumns"\r\n                :showActions="false"\r\n                :showSelection="false">\r\n\r\n                    <template #column-transaction_method="{ item }">\r\n                            <span v-if="item.transaction_method == \'KbcPaymentButton\'">\r\n                                Kbc\r\n                            </span>\r\n                            <span v-else>\r\n                                {{ item.transaction_method }}\r\n                            </span>\r\n                    </template>\r\n\r\n            </sw-data-grid>\r\n         </sw-card>\r\n\r\n\r\n        <sw-loader v-if="isLoading">\r\n        </sw-loader>\r\n    </div>\r\n{% endblock %}',inject:["repositoryFactory","BuckarooPaymentService","systemConfigApiService"],mixins:[c.getByName("notification")],data(){return{config:{},buckaroo_refund_amount:"0",buckaroo_refund_total_amount:"0",currency:"EUR",isRefundPossible:!0,isCapturePossible:!1,isPaylinkAvailable:!1,isPaylinkVisible:!1,paylinkMessage:"",paylink:"",isLoading:!1,order:!1,buckarooTransactions:null,orderItems:[],transactionsToRefund:[],relatedResources:[],isAuthorized:!1}},computed:{orderItemsColumns(){return[{property:"name",label:this.$tc("buckaroo-payment.orderItems.types.name"),allowResize:!1,primary:!0,inlineEdit:!0,multiLine:!0},{property:"quantity",label:this.$tc("buckaroo-payment.orderItems.types.quantity"),rawData:!0,align:"right"},{property:"totalAmount",label:this.$tc("buckaroo-payment.orderItems.types.totalAmount"),rawData:!0,align:"right"}]},transactionsToRefundColumns(){return[{property:"transaction_method",rawData:!0},{property:"amount",rawData:!0}]},relatedResourceColumns(){return[{property:"created_at",label:this.$tc("buckaroo-payment.transactionHistory.types.created_at"),rawData:!0},{property:"total",label:this.$tc("buckaroo-payment.transactionHistory.types.total"),rawData:!0},{property:"shipping_costs",label:this.$tc("buckaroo-payment.transactionHistory.types.shipping_costs"),rawData:!0},{property:"total_excluding_vat",label:this.$tc("buckaroo-payment.transactionHistory.types.total_excluding_vat"),rawData:!0},{property:"vat",label:this.$tc("buckaroo-payment.transactionHistory.types.vat"),rawData:!0},{property:"transaction_key",label:this.$tc("buckaroo-payment.transactionHistory.types.transaction_key"),rawData:!0},{property:"transaction_method",label:this.$tc("buckaroo-payment.transactionHistory.types.transaction_method"),rawData:!0},{property:"statuscode",label:this.$tc("buckaroo-payment.transactionHistory.types.statuscode"),rawData:!0}]}},created(){this.createdComponent()},methods:{recalculateOrderItems(){for(let e in this.buckaroo_refund_amount=0,this.orderItems)this.orderItems[e].totalAmount=parseFloat(parseFloat(this.orderItems[e].unitPrice)*parseFloat(this.orderItems[e].quantity||0)).toFixed(2),this.buckaroo_refund_amount=parseFloat(parseFloat(this.buckaroo_refund_amount)+parseFloat(this.orderItems[e].totalAmount)).toFixed(2)},recalculateRefundItems(){for(let e in this.buckaroo_refund_total_amount=0,this.transactionsToRefund)this.transactionsToRefund[e].amount&&(this.buckaroo_refund_total_amount=parseFloat(parseFloat(this.buckaroo_refund_total_amount)+parseFloat(this.transactionsToRefund[e].amount)).toFixed(2))},getCustomRefundEnabledEl(){return document.getElementById("buckaroo_custom_refund_enabled")},getCustomRefundAmountEl(){return document.getElementById("buckaroo_custom_refund_amount")},toggleCustomRefund(){this.getCustomRefundEnabledEl()&&this.getCustomRefundAmountEl()&&(this.getCustomRefundAmountEl().disabled=!this.getCustomRefundEnabledEl().checked)},getCustomRefundAmount(){return this.getCustomRefundEnabledEl()&&this.getCustomRefundAmountEl()&&this.getCustomRefundEnabledEl().checked?this.getCustomRefundAmountEl().value:0},createdComponent(){let e=this,t=this.$route.params.id;this.systemConfigApiService.getValues("BuckarooPayments.config",null).then(e=>{this.config=e});let n=this.repositoryFactory.create("order"),a=new m(1,1);this.orderId=t,a.addAssociation("transactions.paymentMethod").addAssociation("transactions"),a.getAssociation("transactions").addSorting(m.sort("createdAt")),n.get(t,u.api,a).then(t=>{e.checkedIsAuthorized(t),e.isCapturePossible=t.transactions&&t.transactions.last().paymentMethod&&t.transactions.last().paymentMethod.customFields&&t.transactions.last().paymentMethod.customFields.buckaroo_key&&["klarnakp","billink"].includes(t.transactions.last().paymentMethod.customFields.buckaroo_key.toLowerCase())||e.isAfterpayCapturePossible(t),e.isPaylinkVisible=e.isPaylinkAvailable=this.getConfigValue("paylinkEnabled")&&t.stateMachineState&&t.stateMachineState.technicalName&&"open"==t.stateMachineState.technicalName&&t.transactions&&"open"==t.transactions.last().stateMachineState.technicalName}),this.BuckarooPaymentService.getBuckarooTransaction(t).then(t=>{e.orderItems=[],e.transactionsToRefund=[],e.relatedResources=[],this.$emit("loading-change",!1),t.orderItems.forEach(t=>{e.orderItems.push({id:t.id,name:t.name,quantity:t.quantity,quantityMax:t.quantity,unitPrice:t.unitPrice.value,totalAmount:t.totalAmount.value,variations:t.variations||[]})}),e.recalculateOrderItems(),t.transactionsToRefund.forEach(t=>{e.transactionsToRefund.push({id:t.id,transactions:t.transactions,amount:t.total,amountMax:t.total,currency:t.currency,transaction_method:t.transaction_method,logo:t.transaction_method?t.logo:null}),e.currency=t.currency}),e.recalculateRefundItems(),t.transactions.forEach(t=>{e.relatedResources.push({id:t.id,transaction_key:t.transaction,total:t.total,total_excluding_vat:t.total_excluding_vat,shipping_costs:t.shipping_costs,vat:t.vat,transaction_method:t.transaction_method,logo:t.transaction_method?t.logo:null,created_at:t.created_at,statuscode:t.statuscode})})}).catch(e=>{console.log("errorResponse",e)})},isAfterpayCapturePossible(e){return!0===e.customFields.buckaroo_is_authorize},checkedIsAuthorized(e){this.isAuthorized=e?.transactions?.last()?.stateMachineState?.technicalName==="authorized"},refundOrder(e,t){let n=this;n.isRefundPossible=!1,this.BuckarooPaymentService.refundPayment(e,this.transactionsToRefund,this.orderItems,this.getCustomRefundAmount()).then(e=>{for(let t in e)e[t].status?this.createNotificationSuccess({title:n.$tc("buckaroo-payment.settingsForm.titleSuccess"),message:n.$tc(e[t].message)+e[t].amount}):this.createNotificationError({title:n.$tc("buckaroo-payment.settingsForm.titleError"),message:n.$tc(e[t].message)});n.isRefundPossible=!0,this.createdComponent()}).catch(e=>{this.createNotificationError({title:this.$tc("buckaroo-payment.settingsForm.titleError"),message:e.response.data.message}),n.isRefundPossible=!0})},createPaylink(e){let t=this;t.isPaylinkAvailable=!1,this.BuckarooPaymentService.createPaylink(e,this.transactionsToRefund,this.orderItems).then(e=>{e.status?(t.paylinkMessage=t.$tc(e.message)+e.paylinkhref,t.paylink=e.paylink,this.createNotificationSuccess({title:t.$tc("buckaroo-payment.settingsForm.titleSuccess"),message:t.paylinkMessage})):this.createNotificationError({title:t.$tc("buckaroo-payment.settingsForm.titleError"),message:t.$tc(e.message)}),t.isPaylinkAvailable=!0}).catch(e=>{this.createNotificationError({title:this.$tc("buckaroo-payment.settingsForm.titleError"),message:e.response.data.message}),t.isPaylinkAvailable=!0})},getConfigValue(e){return this.config[`BuckarooPayments.config.${e}`]},captureOrder(e){let t=this;t.isCapturePossible=!1,this.BuckarooPaymentService.captureOrder(e,this.transactionsToRefund,this.orderItems).then(e=>{e.status?this.createNotificationSuccess({title:t.$tc("buckaroo-payment.settingsForm.titleSuccess"),message:e.message}):this.createNotificationError({title:t.$tc("buckaroo-payment.settingsForm.titleError"),message:e.message}),t.isCapturePossible=!0,this.createdComponent()}).catch(e=>{this.createNotificationError({title:this.$tc("buckaroo-payment.settingsForm.titleError"),message:t.$tc(e.response.data.message)}),t.isCapturePossible=!0})}}}),n(104);var p=JSON.parse('{"buckaroo-payment":{"fee":"Buckaroo Betaaltoeslag","order":{"refundDescription":"Refund voor bestelling #orderNumber"},"general":{"title":"Buckaroo","description":"Buckaroo Payment"},"settingsForm":{"save":"Opslaan","titleSuccess":"Succes","titleError":"Foutmelding"},"supportModal":{"menuButton":"Version & Support","title":"Versie & Support","support":{"description":"Zorg ervoor dat u uw website key bij de hand heeft voordat u contact opneemt met Buckaroo technical support","label1":"Buckaroo Plaza:","label2":"Telefoonnummer:","label3":"E-mail:","label4":"Website:","your_version":"Uw PHP versie:","version":"Versie compatibiliteit","information":"Informatie"}},"tabs":{"title":"Buckaroo Payment","overview":"Overzicht"},"paymentDetail":{"yourLink":"Uw Paylink","paylinkButton":"Cre\xeber Paylink","paylinkDescription":"Cre\xeber Paylink voor order","paylinkTitle":"Paylink","refundTitle":"Terugbetaling","transactionsTitle":"Transacties","amountTitle":"Hoeveelheid","amountTotalTitle":"Algemeen totaal (grand total)","amountRefundTotalTitle":"Terugbetaling Algemeen totaal (grand total)","amountCustomRefundTitle":"Aangepast bedrag terugbetalen","buttonTitle":"Terugbetaling","successTitle":"Success","successMessage":"Buckaroo terugbetaling succesvol","errorTitle":"Foutmelding","payTitle":"Betaling vastleggen (Capture)","payDescription":"Factuur voor bestelling vastleggen (Capture) en aanmaken","payButton":"Betaling vastleggen (Capture)"},"orderItems":{"title":"Artikelen om terug te betalen","types":{"id":"id","name":"Titel","quantity":"Aantal om terug te betalen","totalAmount":"Subtotaal"}},"transactionsToRefund":{"title":"Terugbetaling Totaal"},"transactionHistory":{"types":{"id":"id","created_at":"Datum/tijd","total":"Totaal","shipping_costs":"Verzendkosten","total_excluding_vat":"Totaal exclusief BTW","total_including_vat":"Totaal inclusief BTW","vat":"BTW","transaction_key":"Transactie key","transaction_method":"Betaalmethode","statuscode":"Status"}},"messageNotValid":"Dit veld is niet geldig.","messageNotBlank":"Dit veld mag niet leeg zijn.","button":{"labelTestApi":"Test gegevens"},"afterpay":{"setup":"Belastingkoppeling instellen voor Riverty old ","hightTaxes":"Hoge BTW-heffingen","middleTaxes":"Middelmatige BTW-belastingen","lowTaxes":"Lage BTW-heffingen","zeroTaxes":"Nul VAT","noTaxes":"Geen BTW"},"paymentInTestMode":"De betaling voor deze bestelling is in testmodus uitgevoerd","refund":{"not_supported":"Terugbetaling wordt niet ondersteund","already_refunded":"Deze bestelling is al terugbetaald","refunded_amount":"Buckaroo terugbetaling succesvol"},"test_api":{"connection_ready":"Verbinding gereed","connection_failed":"Verbinding mislukt"},"paylink":{"invalid_amount":"Het bedrag is niet geldig","pay_link":"Uw Paylink:"},"missing_order_id":"Ontbrekende bestelling orderId","missing_transaction":"Order transactie niet gevonden","general_request_error":"Helaas is er een fout opgetreden tijdens het verwerken van uw aanvraag. Probeer het opnieuw.","in3LogoLabel":"Betaalmethode Logo:","configure-payment":"Configure payment","configure-link":"Configure","payment-methods":"Payment methods"}}'),g=JSON.parse('{"buckaroo-payment":{"fee":"Buckaroo Geb\xfchr","order":{"refundDescription":"R\xfcckerstattung f\xfcr Bestellung #orderNumber"},"general":{"title":"Buckaroo","description":"Buckaroo Zahlung"},"settingsForm":{"save":"Speichern","titleSuccess":"Erfolg","titleError":"Fehler"},"supportModal":{"menuButton":"Version & Unterst\xfctzung","title":"Version & Unterst\xfctzung","support":{"description":"Bevor Sie den technischen Support von Buckaroo kontaktieren, bitte holen Sie Ihren (H\xe4ndler-)Schl\xfcssel und Geheimschl\xfcssel ab.","label1":"Buckaroo Plaza:","label2":"Telefon:","label3":"E-Mail:","label4":"Webseite:","your_version":"Ihre PHP-Version:","version":"Versionskompatibilit\xe4t","information":"Informationen"}},"tabs":{"title":"Buckaroo Payment","overview":"\xdcbersicht"},"paymentDetail":{"yourLink":"Ihr Paylink","paylinkButton":"Paylink erstellen","paylinkDescription":"Paylink erstellen f\xfcr Bestellung","paylinkTitle":"Paylink","refundTitle":"R\xfcckerstattung","transactionsTitle":"Transaktionen","amountTitle":"Betrag","amountTotalTitle":"Gesamtsumme","amountRefundTotalTitle":"Gesamtsumme der R\xfcckerstattung","amountCustomRefundTitle":"R\xfcckerstattung individueller Betrag","buttonTitle":"R\xfcckerstattung","successTitle":"Erfolg","successMessage":"Buckaroo-Erfolg, zur\xfcckerstattet","errorTitle":"Fehler","payTitle":"Zahlung erfassen (Capture)","payDescription":"Erfassen (Capture) und Rechnung f\xfcr Bestellung erstellen","payButton":"Zahlung erfassen (Capture)"},"orderItems":{"title":"Artikel zur R\xfcckerstattung","types":{"id":"id","name":"Titel","quantity":"Menge zur R\xfcckerstattung","totalAmount":"Teilsumme"}},"transactionsToRefund":{"title":"R\xfcckerstattungssummen"},"transactionHistory":{"types":{"id":"id","created_at":"Datum/Uhrzeit","total":"Gesamt","shipping_costs":"Versandkosten","total_excluding_vat":"Gesamt ohne MwSt. (VAT)","total_including_vat":"Gesamt inklusive MwSt. (VAT)","vat":"MwSt. (VAT)","transaction_key":"Transaktionsschl\xfcssel","transaction_method":"Zahlungsmethode","statuscode":"Status"}},"messageNotValid":"Dieses Feld ist nicht g\xfcltig.","messageNotBlank":"Dieses Feld darf nicht leer sein.","button":{"labelTestApi":"Verbindung testen"},"afterpay":{"setup":"Steuerzuordnung f\xfcr Riverty old einrichten ","hightTaxes":"Hohe MwSt. (VAT)","middleTaxes":"Mittlere MwSt. (VAT)","lowTaxes":"Niedrige MwSt. (VAT)","zeroTaxes":"Keine MwSt. (VAT)","noTaxes":"Keine Mehrwertsteuer"},"paymentInTestMode":"Die Zahlung f\xfcr diese Bestellung wurde im Testmodus durchgef\xfchrt","refund":{"not_supported":"R\xfcckerstattung wird nicht unterst\xfctzt","already_refunded":"Diese Bestellung wurde bereits zur\xfcckerstattet","refunded_amount":"Erfolgreich von Buckaroo erstattet"},"test_api":{"connection_ready":"Verbindung bereit","connection_failed":"Verbindung fehlgeschlagen"},"paylink":{"invalid_amount":"Betrag ist nicht g\xfcltig","pay_link":"Ihr Zahlungslink (Paylink):"},"missing_order_id":"Fehlende Bestell-ID","missing_transaction":"Transaktion der Bestellung nicht gefunden","general_request_error":"Leider ist ein Fehler bei der Bearbeitung Ihrer Anfrage aufgetreten. Bitte versuchen Sie es erneut.","in3LogoLabel":"Zahlungslogo:","configure-payment":"Configure payment","configure-link":"Configure","payment-methods":"Payment methods"}}'),h=JSON.parse('{"buckaroo-payment":{"fee":"Buckaroo Fee","order":{"refundDescription":"Refund for order #orderNumber"},"general":{"title":"Buckaroo","description":"Buckaroo Payment"},"settingsForm":{"save":"Save","titleSuccess":"Success","titleError":"Error"},"supportModal":{"menuButton":"Version & Support","title":"Version & Support","support":{"description":"Before contacting Buckaroo technical support, please retrieve your (Merchant) key, Secret key, certificate and certificate thumbprint.","label1":"Buckaroo Payment Plaza:","label2":"Phone:","label3":"E-mail:","label4":"Website:","your_version":"Your PHP version:","version":"Version compatibility","information":"Information"}},"tabs":{"title":"Buckaroo Payment","overview":"Overview"},"paymentDetail":{"yourLink":"Your Paylink","paylinkButton":"Create paylink","paylinkDescription":"Create paylink for order","paylinkTitle":"Paylink","refundTitle":"Refund","transactionsTitle":"Transactions","amountTitle":"Amount","amountTotalTitle":"Grand total","amountRefundTotalTitle":"Refund Grand total","amountCustomRefundTitle":"Refund custom amount","buttonTitle":"Refund","successTitle":"Success","successMessage":"Buckaroo success refunded ","errorTitle":"Error","payTitle":"Capture payment","payDescription":"Capture and create invoice for order","payButton":"Capture payment"},"orderItems":{"title":"Items to Refund","types":{"id":"id","name":"Title","quantity":"Qty to Refund","totalAmount":"Subtotal"}},"transactionsToRefund":{"title":"Refund Totals"},"transactionHistory":{"types":{"id":"id","created_at":"Date/time","total":"Total","shipping_costs":"Shipping costs","total_excluding_vat":"Total excluding VAT","total_including_vat":"Total including VAT","vat":"VAT","transaction_key":"Transaction key","transaction_method":"Payment method","statuscode":"Status"}},"messageNotValid":"This field not valid.","messageNotBlank":"This field must not be empty.","button":{"labelTestApi":"Test connection"},"afterpay":{"setup":"Setup tax association for Riverty old ","hightTaxes":"High VAT taxes","middleTaxes":"Middle VAT taxes","lowTaxes":"Low VAT taxes","zeroTaxes":"Zero VAT","noTaxes":"No VAT tax"},"paymentInTestMode":"The payment for this order was made in test mode","refund":{"not_supported":"Refund is not supported","already_refunded":"This order is already refunded","refunded_amount":"Buckaroo success refunded"},"test_api":{"connection_ready":"Connection ready","connection_failed":"Connection failed"},"paylink":{"invalid_amount":"Amount is not valid","pay_link":"Your Paylink:"},"missing_order_id":"Missing order orderId","missing_transaction":"Order transaction not found","general_request_error":"Unfortunately an error occurred while processing your request. Please try again.","in3LogoLabel":"Payment Logo:","configure-payment":"Configure payment","configure-link":"Configure","payment-methods":"Payment methods"}}');let{Module:y}=Shopware;y.register("buckaroo-payment",{type:"plugin",name:"BuckarooPayment",title:"buckaroo-payment.general.title",description:"buckaroo-payment.general.description",version:"1.0.0",targetVersion:"1.0.0",color:"#000000",icon:"default-action-settings",snippets:{"nl-NL":p,"de-DE":g,"en-GB":h},routeMiddleware(e,t){"sw.order.detail"===t.name&&t.children.push({component:"buckaroo-payment-detail",name:"buckaroo.payment.detail",isChildren:!0,path:"/sw/order/buckaroo/detail/:id"}),e(t)},routes:{config:{component:"buckaroo-payment-config",path:":namespace/payment/:paymentCode",name:"buckaroo.config.payment",meta:{parentPath:"sw.extension.config"},props:{default(e){return{namespace:e.params.namespace}}}}}}),n(666),n(320);let{Component:f}=Shopware;f.register("buckaroo-afterpay-old-tax",{template:'<div>\r\n    <a style="margin-bottom:10px;" @click="showTaxes = !showTaxes">{{$tc(\'buckaroo-payment.afterpay.setup\')}}</a>\r\n    <div v-if="showTaxes" style="padding: 10px;background: rgb(246 246 246); margin-bottom:10px;">\r\n        <div class="tax" v-for="tax in taxes">\r\n            <sw-select-field\r\n            :label="tax.name"\r\n            label-property="name"\r\n            value-property="id"\r\n            :options="afterpayTaxes"\r\n            @change="setTaxAssociation(tax.id, $event)"\r\n            :value="getSelectValue(tax.id)"\r\n            ></sw-select-field>\r\n        </div>\r\n    </div>\r\n</div>',inject:["BuckarooPaymentSettingsService"],data(){return{taxes:[],showTaxes:!1,afterpayTaxes:[{name:this.$tc("buckaroo-payment.afterpay.hightTaxes"),id:1},{name:this.$tc("buckaroo-payment.afterpay.middleTaxes"),id:5},{name:this.$tc("buckaroo-payment.afterpay.lowTaxes"),id:2},{name:this.$tc("buckaroo-payment.afterpay.zeroTaxes"),id:3},{name:this.$tc("buckaroo-payment.afterpay.noTaxes"),id:4}],taxAssociation:{}}},model:{prop:"value",event:"change"},computed:{},props:{name:{type:String,required:!0,default:""},value:{type:Object,required:!1,default(){return{}}}},created(){this.BuckarooPaymentSettingsService.getTaxes().then(e=>{this.taxes=e.taxes.map(e=>({id:e.id,name:e.name}))})},methods:{setTaxAssociation(e,t){this.taxAssociation[e]=t,this.$emit("change",{...this.value,...this.taxAssociation})},getSelectValue(e){if(this.value[e])return this.value[e]}}});let{Component:b}=Shopware;b.register("buckaroo-main-config",{template:'<div>\r\n<buckaroo-config-card\r\n    :card="mainCard"\r\n    :methods="elementMethods"\r\n    :isNotDefaultSalesChannel="isNotDefaultSalesChannel"\r\n    :currentSalesChannelId="currentSalesChannelId"\r\n    v-model="value"\r\n></buckaroo-config-card>\r\n<buckaroo-payment-list\r\n    v-if="selectedCard === \'general\'"\r\n    :configSettings="configSettings"\r\n    :currentSalesChannelId="currentSalesChannelId"\r\n    v-model="value">\r\n</buckaroo-payment-list>\r\n</div>',props:{configSettings:{required:!0},value:{required:!0},elementMethods:{required:!0},isNotDefaultSalesChannel:{required:!0},currentSalesChannelId:{required:!0}},data(){return{selectedCard:this.$route.params?.paymentCode||"general"}},watch:{$route(e){e.params?.paymentCode&&(this.selectedCard=e.params.paymentCode)}},computed:{mainCard(){return this.configSettings.filter(e=>e.name===this.selectedCard)?.pop()}}});let{Component:k}=Shopware;k.register("buckaroo-config-card",{template:'{% block buckaroo_config_card %}\r\n    <sw-card position-identifier="xxsw-system-config-content">\r\n        <template #title>\r\n            {{ getInlineSnippet(card.title) }}\r\n        </template>\r\n\r\n        <div v-for="element in card.elements">\r\n            <div v-if="canShow(element)">\r\n                <slot name="card-element" v-bind="{ element: getElementBind(element), config: value, card }">\r\n                    \r\n                    <sw-inherit-wrapper\r\n                        {% if VUE3 %}\r\n                        v-model:value="value[element.name]"\r\n                        {% else %}\r\n                        v-model="value[element.name]"\r\n                        {% endif %}\r\n                        v-bind="getInheritWrapperBind(element)"\r\n                        :has-parent="isNotDefaultSalesChannel"\r\n                        :inherited-value="getInheritedValue(element)"\r\n                        :class="\'sw-system-config--field-\' + kebabCase(getElementBind(element).name)"\r\n                    >\r\n                        <template #content="props">\r\n                            {# <sw-form-field-renderer\r\n                                v-bind="getElementBind(element, props)"\r\n                                :key="props.isInheritField + props.isInherited"\r\n                                :disabled="props.isInherited"\r\n                                :value="props.currentValue"\r\n                                :error="getFieldError(element.name)"\r\n                                @input="props.updateCurrentValue"\r\n                                @change="props.updateCurrentValue"\r\n                                @update:value="props.currentValue = $event"\r\n                            /> #}\r\n                            <sw-form-field-renderer v-bind="getElementBind(element, props)"\r\n                                :value="value[element.name]" \r\n                                :disabled="props.isInherited"\r\n                                :error="getFieldError(element.name)"\r\n                                @input="props.updateCurrentValue"\r\n                                @change="props.updateCurrentValue"\r\n                                @update:value="value[element.name] = $event" />\r\n                        </template>\r\n\r\n                    </sw-inherit-wrapper>\r\n                </slot>\r\n                <buckaroo-test-credentials\r\n                    v-if="canShowCredentialTester(element)"\r\n                    :config="value"\r\n                    :currentSalesChannelId="currentSalesChannelId"\r\n                />\r\n            </div>\r\n        </div>\r\n    </sw-card>\r\n{% endblock %}',props:{card:{required:!0},methods:{required:!0},isNotDefaultSalesChannel:{required:!0},value:{required:!0},currentSalesChannelId:{required:!0}},methods:{getElementBind(e,t){return this.methods.getElementBind(e,t)},getInheritWrapperBind(e){return this.methods.getInheritWrapperBind(e)},getFieldError(e){return this.methods.getFieldError(e)},kebabCase(e){return this.methods.kebabCase(e)},getInlineSnippet(e){return this.methods.getInlineSnippet(e)},getInheritedValue(e){return this.methods.getInheritedValue(e)},canShow(e){let t=e.name.replace("BuckarooPayments.config.","");return -1!==["orderStatus","paymentSuccesStatus","automaticallyCloseOpenOrders","sendInvoiceEmail"].indexOf(t)?this.getValueForName("advancedConfiguration"):"idealprocessingRenderMode"===t?this.getValueForName("idealprocessingShowissuers"):"idealRenderMode"===t?this.getValueForName("idealShowissuers"):-1!==["idealFastCheckoutEnabled","idealFastCheckoutVisibility","idealFastCheckoutLogoScheme"].indexOf(t)?this.getValueForName("idealFastCheckout"):"afterpayPaymentstatus"===t?this.getValueForName("afterpayCaptureonshippent"):"afterpayOldtax"!==t||this.getValueForName("afterpayEnabledold")},getValueForName(e){return this.value[`BuckarooPayments.config.${e}`]},canShowCredentialTester(e){return this.getValueForName("advancedConfiguration")?"BuckarooPayments.config.orderStatus"===e.name:"BuckarooPayments.config.advancedConfiguration"===e.name}}}),n(302);let{Component:v,Filter:_,Mixin:w}=Shopware;v.register("buckaroo-payment-list",{template:'<sw-card\r\n    position-identifier="bk-config-payment-list"\r\n    :title="$tc(\'buckaroo-payment.payment-methods\')"\r\n>\r\n<div class="bk-payment-wrap">\r\n <template\r\n    v-for="payment in payments" >\r\n    <div class="bk-payment">\r\n        <div class="bk-payment-inner">\r\n        <router-link  :title="$tc(\'buckaroo-payment.configure-payment\')" :to="{name: \'buckaroo.payment.config\', params: {namespace: \'BuckarooPayments\', paymentCode: payment.code } }">\r\n            <div class="bk-payment-img">\r\n                <img :src="assetFilter(`buckaroopayments/administration/static/${payment.logo}`)" alt="Payment logo">\r\n            </div>\r\n            <div class="bk-payment-name">\r\n                {{ getPaymentTitle(payment.code) }}\r\n            </div>\r\n        </router-link>\r\n\r\n        <buckaroo-toggle-status\r\n            :currentSalesChannelId="currentSalesChannelId"\r\n            :method="payment.code"\r\n            v-model="value"\r\n        />\r\n\r\n        <router-link class="bk-link" :title="$tc(\'buckaroo-payment.configure-payment\')" :to="{name: \'buckaroo.payment.config\', params: {namespace: \'BuckarooPayments\', paymentCode: payment.code } }">\r\n            {{$tc(\'buckaroo-payment.configure-link\')}}\r\n        </router-link>\r\n        </div>\r\n    </div>\r\n </template>\r\n </div>\r\n</sw-card>',props:{configSettings:{required:!0},value:{required:!0},currentSalesChannelId:{required:!0}},mixins:[w.getByName("sw-inline-snippet")],data(){return{payments:[{code:"Alipay",logo:"alipay.svg"},{code:"applepay",logo:"applepay.svg"},{code:"bancontactmrcash",logo:"bancontact.svg"},{code:"blik",logo:"blik.svg"},{code:"belfius",logo:"belfius.svg"},{code:"Billink",logo:"billink.svg"},{code:"creditcard",logo:"creditcards.svg"},{code:"creditcards",logo:"creditcards.svg"},{code:"eps",logo:"eps.svg"},{code:"giftcards",logo:"giftcards.svg"},{code:"idealqr",logo:"ideal-qr.svg"},{code:"ideal",logo:"ideal.svg"},{code:"capayable",logo:"ideal-in3.svg"},{code:"KBCPaymentButton",logo:"kbc.svg"},{code:"klarnakp",logo:"klarna.svg"},{code:"knaken",logo:"gosettle.svg"},{code:"mbway",logo:"mbway.svg"},{code:"multibanco",logo:"multibanco.svg"},{code:"paybybank",logo:"paybybank.svg"},{code:"payconiq",logo:"payconiq.svg"},{code:"paypal",logo:"paypal.svg"},{code:"payperemail",logo:"payperemail.svg"},{code:"Przelewy24",logo:"przelewy24.svg"},{code:"afterpay",logo:"afterpay.svg"},{code:"sepadirectdebit",logo:"sepa-directdebit.svg"},{code:"transfer",logo:"sepa-credittransfer.svg"},{code:"Trustly",logo:"trustly.svg"},{code:"WeChatPay",logo:"wechatpay.svg"}]}},methods:{getPaymentTitle(e){let t=this.configSettings.find(t=>t.name===e);if(t)return this.getInlineSnippet(t.title);let n=this.payments.find(t=>t.code===e);return n?n.code:"Unknown Payment"},assetFilter(e){return _.getByName("asset")(e)}}});let{Component:C,Mixin:T}=Shopware;C.register("buckaroo-test-credentials",{template:'    <sw-button @click="sendTestApi" :disabled="!enabled" variant="primary" :square="false" :block="true" :isLoading="isLoading">{{ $tc(\'buckaroo-payment.button.labelTestApi\') }}</sw-button>',mixins:[T.getByName("notification"),T.getByName("sw-inline-snippet")],data(){return{isLoading:!1}},inject:["BuckarooPaymentSettingsService"],props:{config:{type:Object,required:!0},currentSalesChannelId:{required:!0}},computed:{enabled:function(){return(this.getConfigValue("websiteKey")||"").length>0&&(this.getConfigValue("secretKey")||"").length>0}},methods:{getConfigValue:function(e){return this.config["BuckarooPayments.config."+e]},sendTestApi(){this.isLoading=!0;let e=this.getConfigValue("websiteKey"),t=this.getConfigValue("secretKey");this.BuckarooPaymentSettingsService.getApiTest(e,t,this.currentSalesChannelId).then(e=>{this.isLoading=!1,"success"==e.status?this.createNotificationSuccess({title:this.$tc("buckaroo-payment.settingsForm.titleSuccess"),message:this.$tc(e.message)}):this.createNotificationError({title:this.$tc("buckaroo-payment.settingsForm.titleError"),message:this.$tc(e.message)})}).catch(()=>{this.isLoading=!1})}}}),n(737);let{Component:S,Mixin:B}=Shopware;S.register("buckaroo-toggle-status",{template:'<div class="bk-toogle-wrap">\r\n    <button\r\n            type="button"\r\n            :disabled="isLoading"\r\n            :class="`live ${getClass(\'live\')}`"\r\n            @click="setStatus(\'live\')"\r\n    >\r\n        Live\r\n    </button>\r\n\r\n    <button\r\n            v-if="method !== \'idealqr\'"\r\n            type="button"\r\n            :disabled="isLoading"\r\n            :class="`test ${getClass(\'test\')}`"\r\n            @click="setStatus(\'test\')"\r\n    >\r\n        Test\r\n    </button>\r\n\r\n    <button\r\n            type="button"\r\n            :disabled="isLoading"\r\n            :class="`disabled ${getClass(\'disabled\')}`"\r\n            @click="setStatus(\'disabled\')"\r\n    >\r\n        Off\r\n    </button>\r\n</div>\r\n',props:{method:{type:String,required:!0},value:{required:!0},currentSalesChannelId:{required:!0}},mixins:[B.getByName("notification")],inject:["systemConfigApiService"],data(){return{status:this.getStatus(),isLoading:!1}},watch:{value(){this.status=this.getStatus()}},methods:{getStatus(){return this.isActive()?this.getEnvironment():"disabled"},isActive(){return this.getValueForName(`${this.method}Enabled`)},getEnvironment(){let e=this.getValueForName(`${this.method}Environment`);return void 0===e?"test":e},getValueForName(e){return this.value?.[`BuckarooPayments.config.${e}`]},setStatus(e){this.status=e,this.saveStatus()},getClass(e){return this.status===e?"active":""},async saveStatus(){let e=`BuckarooPayments.config.${this.method}Enabled`,t=`BuckarooPayments.config.${this.method}Environment`,n={[e]:!1};this.$set(this.value,e,!1),-1!==["live","test"].indexOf(this.status)&&(n={[e]:!0,[t]:this.status},this.$set(this.value,e,!0),this.$set(this.value,t,this.status)),this.isLoading=!0;try{await this.systemConfigApiService.batchSave({[this.currentSalesChannelId]:n}).finally(()=>{this.isLoading=!1}),this.renderSuccess()}catch(e){this.renderError(e)}},renderSuccess(){this.createNotificationSuccess({message:this.$tc("sw-extension-store.component.sw-extension-config.messageSaveSuccess")})},renderError(e){this.createNotificationError({message:e})}}})}()})();